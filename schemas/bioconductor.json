{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$id": "bioconductor.json",
    "type": "object",
    "title": "Bioconductor metadata standards",
    "properties": {
        "title": {
            "type": "string",
            "description": "Title of the object.",
            "_attributes": [ "free_text" ]
        },

        "description": {
            "type": "string",
            "description": "Description of the object.",
            "_attributes": [ "free_text" ]
        },

        "bioconductor_version": {
            "type": "string",
            "description": "Version of Bioconductor used to generate the object.",
            "pattern": "^[1-9][0-9]*\\.[1-9][0-9]*$"
        },

        "taxonomy_id": {
            "type": "array",
            "description": "NCBI taxonomy ID. Multiple entries may be supplied if multiple organisms are present.",
            "items": {
                "type": "string",
                "pattern": "^[1-9][0-9]*$"
            },
            "uniqueItems": true
        },

        "genome": {
            "type": "array",
            "description": "Ensembl genome build identifiers. Multiple entries may be supplied if multiple organisms are present.",
            "items": {
                "type": "string",
                "enum": [ 
                    "GRCm38", 
                    "GRCm39",
                    "GRCh38", 
                    "TAIR10", 
                    "CanFam3.1", 
                    "BDGP6",
                    "GRCz10",
                    "GRCz11",
                    "Rnor_5.0",
                    "Rnor_6.0"
                ]
            },
            "uniqueItems": true
        },

        "sources": {
            "type": "array",
            "description": "Data sources for this object.",
            "items": {
                "type": "object",
                "properties": {
                    "provider": {
                        "type": "string",
                        "description": "Name of the data provider.",
                        "enum": [ "GEO", "ArrayExpress", "PubMed", "other" ]
                    },
                    "id": {
                        "type": "string",
                        "description": "Provider-specific identifier for the data source."
                    }
                },
                "required": [ "provider", "id" ],
                "additionalProperties": false,
                "allOf": [
                    {
                        "if": { "properties": { "provider": { "const": "GEO" } } },
                        "then": { "properties": { "id": { "type": "string", "pattern": "^GSE[0-9]+$" } } }
                    },
                    {
                        "if": { "properties": { "provider": { "const": "ArrayExpress" } } },
                        "then": { "properties": { "id": { "type": "string", "pattern": "^E-MTAB-[0-9]+$" } } }
                    },
                    {
                        "if": { "properties": { "provider": { "const": "PubMed" } } },
                        "then": { "properties": { "id": { "type": "string", "pattern": "^[1-9][0-9]+$" } } }
                    },
                    {
                        "if": { "properties": { "provider": { "const": "other" } } },
                        "then": { "properties": { "id": { "type": "string", "pattern": "^https?://[^\\s]+$" } } }
                    }
                ]
            },
            "minItems": 1
        },

        "maintainer_name": {
            "type": "string",
            "description": "Name of the maintainer. This should contain at least the first and last names separated by a space.",
            "pattern": "^[^\\s]+(?: [^\\s]+)$",
            "_attributes": [ "free_text" ]
        },

        "maintainer_email": {
            "type": "string",
            "description": "Email address of the maintainer.",
            "pattern": "^[^@\\s]+@[^@\\.\\s]+\\.[^@\\s]+"
        }
    },

    "required": ["title", "description", "bioconductor_version", "taxonomy_id", "genome", "sources", "maintainer_name", "maintainer_email" ],
    "additionalProperties": false
}
